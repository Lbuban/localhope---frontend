<h1>
  Charity Needs Page
</h1>


<table [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" datatable class="table table-hover table-bordered" id="dataTable" style="width:100%">
  <thead>
    <tr>
      <th>Charity ID</th>
      <th>Charity Name</th>
      <!-- <th>Category</th> -->
      <!-- <th>Rating</th> -->
      <th>Charity Type</th>
      <th>EIN</th>
      <th>Need Category</th>
      <th>Need by Date</th>
      <th>Description</th>
      <th>Original Amount</th>
      <th>Give</th>
      <th>Follow</th>
      <!-- <th>Rating</th> -->
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let need of needs">
        <td>{{need.users[0].id}}</td>
        <td>{{need.users[0].charityName}}</td>
        <!-- <td>{{need.category}}</td> -->
        <!-- <td>{{need.rating}}</td> -->
        <td>{{need.users[0].charityType}}</td>
        <td>{{need.users[0].ein}}</td>
        <td>{{need.type}}</td>
        <td>{{need.dateNeeded}}</td>
        <td>{{need.description}}</td>
        <td>{{need.originalAmount}}</td>
        <td class="text-center">
          <button attr.data-need-Id="{{need.id}}" (click)="getRecordForEdit(need)" data-toggle="modal" data-target="#giveForm"#give (click)="giveNeed(give.getAttribute('data-need-Id'))"class="btn btn-primary glyphicon glyphicon-gift" ></button>
        </td>
        <td class="text-center">
          <button attr.data-Id="{{need.users[0].id}}" #follow (click)="followCharity(follow.getAttribute('data-Id'))" class="btn btn-primary glyphicon glyphicon-ok"></button>
        </td>  
      <!-- <td>{{charity.rating}}</td> -->
    </tr>
  </tbody>
</table>

<h1>
  Followed Charities
</h1>

 
<table class="table table-hover table-striped table-bordered" datatable="ng" id="dataTable" style="width:100%">
  <thead>
    <tr>
      <th>Charity ID</th>
      <th>Charity Name</th>
      <th>EIN</th>
      <th>Unfollow</th>
      
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <td>{{user.id}}</td>
      <td>{{user.charityName}}</td>
      <td>{{user.ein}}</td>
      <td class="text-center">
        <button attr.data-Id="{{user.id}}" #unFollow (click)="unfollowCharity(unFollow.getAttribute('data-Id'))" class="btn btn-danger glyphicon glyphicon-remove"></button>
      </td>  
      
    </tr>
  </tbody>
</table> 


<div class="modal fade" id="giveForm" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Give</h3>
      </div>

      <div class="modal-body">
        <form  id="decrement" class="form-horizontal" (ngSubmit)="decrementNeed(giveForm)" #editForm="ngForm">
          <!-- <div class="form-group">
             <label for="type" class="mr-sm-2 col-sm-2 control-label">Donation Type</label>
            <div class="col-sm-10">
              <select [ngModel]="giveNeed?.type" name="type" class="custom-select mb-2 mr-sm-2 mb-sm-0" id="type" required>
                <option selected value="Money">Money</option>
                <option value="Time">Time</option>
                <option value="Items">Items</option>
              </select>
            </div>
          </div>  -->
<!-- 
           <div class="form-group">
              <label for="id" class="col-sm-2 control-label">id</label>
              <div class="col-sm-10">
                <input class="form-control" name="id" [ngModel]="giveNeed?.id" >
              </div>
          </div>  -->
          <p> Donation Type: {{giveNeed.type}}</p>
          <div class="form-group">
            <label for="originalAmount" class="col-sm-2 control-label">Give Amount</label>
            <div class="col-sm-10">
              <input value= {{giveNeed?.originalAmount}} class="form-control" name="originalAmount" #amount [ngModel]="giveNeed?.originalAmount" required>
            </div>
          </div>
         
          <p> Donation Description: {{giveNeed.description}}</p>

          <div class="modal-footer">
              <button type="button" value="{{giveNeed?.id}}" data-dismiss="modal" class="btn btn-primary" #decrement (click)="decrementNeed(decrement.value, amount.value)">Give</button>
              <button id="closeButton" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </form>
    </div>
  </div>   
 </div>
</div>
 
